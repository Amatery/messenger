{"version":3,"sources":["serviceWorker.ts","api/api.ts","redux/chat-reducer.ts","redux/store.ts","Components/Chat/Chat.tsx","Components/LoginPage/LoginPage.tsx","MessengerApp.tsx","index.tsx","Components/LoginPage/LoginPage.module.css","Components/Chat/Chat.module.css"],"names":["Boolean","window","location","hostname","match","api","socket","createConnection","this","io","subscribe","initMessagesHandler","newMessageSentHandler","userTypingHandler","on","destroyConnection","disconnect","sendName","name","emit","error","console","log","alert","sendMessage","message","typeMessage","initialState","messages","typingUsers","action","type","user","dispatch","rootReducer","combineReducers","chat","state","filter","u","id","store","createStore","applyMiddleware","thunk","Chat","props","useSelector","useDispatch","useState","setMessage","isAutoScrollActive","setIsAutoScrollActive","lastScrollTop","setLastScrollTop","useEffect","messagesAnchorRef","current","scrollIntoView","behavior","useRef","messageElements","map","m","key","typingUsersElement","to","className","styles","chatWindow","onScroll","e","element","currentTarget","maxScrollPosition","scrollHeight","clientHeight","scrollTop","Math","abs","ref","messageField","label","value","onKeyPress","target","onChange","messageButton","size","variant","color","onClick","LoginPage","history","useHistory","setClientNameOnClick","setName","temporaryName","fn","header","nameField","setTemporaryName","length","push","nameButton","buttonText","disabled","MessengerApp","exact","path","render","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","module","exports"],"mappings":"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","file":"static/js/main.22dcda7d.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import io from 'socket.io-client'\r\nimport {MessageType, UserType} from \"../Components/Chat/Chat\";\r\n\r\nexport const api = {\r\n    socket: null as null | SocketIOClient.Socket,\r\n\r\n    createConnection() {\r\n        // this.socket = io('http://localhost:3009');\r\n        this.socket = io('https://sin-messenger.herokuapp.com/');\r\n    },\r\n    subscribe(initMessagesHandler: (messages: Array<MessageType>, fn: () => void) => void,\r\n              newMessageSentHandler: (message: MessageType) => void,\r\n              userTypingHandler: (user: UserType) => void\r\n    ) {\r\n        this.socket?.on('init-messages-published', initMessagesHandler);\r\n        this.socket?.on('new-message-sent', newMessageSentHandler);\r\n        this.socket?.on('user-typing', userTypingHandler);\r\n    },\r\n    destroyConnection() {\r\n        this.socket?.disconnect();\r\n        this.socket = null\r\n    },\r\n    sendName(name: string) {\r\n        this.socket?.emit('client-name-sent', name, (error: string | null) => {\r\n            console.log(error);\r\n            if (error) alert(error);\r\n        })\r\n    },\r\n    sendMessage(message: string) {\r\n        this.socket?.emit('client-message-sent', message, (error: string | null) => {\r\n            if (error) alert(error);\r\n        })\r\n    },\r\n    typeMessage() {\r\n        this.socket?.emit('client-typed');\r\n    }\r\n};\r\n","import { Dispatch } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport {api} from '../api/api'\r\nimport { MessageType, UserType } from '../Components/Chat/Chat';\r\nimport {AppStateType, InferActionTypes } from './store';\r\n\r\nconst initialState = {\r\n    messages: [] as Array <MessageType>,\r\n    typingUsers: [] as Array <UserType>\r\n};\r\n\r\nexport const chatReducer = (state: InitialStateType = initialState, action: ActionTypes) : InitialStateType => {\r\n    switch (action.type) {\r\n        case 'messages-received': {\r\n            return {...state, messages: action.messages}\r\n        }\r\n        case 'new-message-received': {\r\n            return {...state,\r\n                messages: [...state.messages, action.message],\r\n                typingUsers: state.typingUsers.filter(u => u.id !== action.message.user.id)\r\n            }\r\n        }\r\n        case 'typingUserAdded': {\r\n            return {...state, typingUsers: [...state.typingUsers.filter(u => u.id !== action.user.id), action.user]}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\n\r\nconst action = {\r\n    messagesReceived: (messages: Array<MessageType>) => ({\r\n        type: 'messages-received',\r\n        messages\r\n    }as const),\r\n    newMessageReceived: (message: MessageType) => ({\r\n        type: 'new-message-received',\r\n        message\r\n    }as const),\r\n    typingUserAdded: (user: UserType) => ({\r\n        type: 'typingUserAdded',\r\n        user\r\n    }as const)\r\n};\r\n\r\nexport const createConnection = () => (dispatch: Dispatch) => {\r\n    api.createConnection();\r\n    api.subscribe((messages: Array<MessageType>, fn: (data: string) => void) => {\r\n            dispatch(action.messagesReceived(messages));\r\n            fn(\"data from front\");\r\n        },\r\n        (message: MessageType) => {\r\n            dispatch(action.newMessageReceived(message))\r\n        },\r\n        (user: UserType) => {\r\n            dispatch(action.typingUserAdded(user))\r\n        })\r\n};\r\n\r\n\r\nexport const setClientName = (name: string): ThunkType => (dispatch: Dispatch) => {\r\n    api.sendName(name);\r\n};\r\n\r\nexport const typeMessage = (): ThunkType => (dispatch: Dispatch) => {\r\n    api.typeMessage();\r\n};\r\nexport const sendMessage = (messages: string): ThunkType => (dispatch: Dispatch) => {\r\n    api.sendMessage(messages);\r\n};\r\n\r\nexport const destroyConnection = (): ThunkType => (dispatch: Dispatch) => {\r\n    api.destroyConnection()\r\n};\r\n\r\n\r\n//Types\r\ntype ActionTypes = InferActionTypes<typeof action>\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionTypes>\r\ntype InitialStateType = typeof initialState\r\n\r\n\r\n\r\n\r\n","import {applyMiddleware, combineReducers, createStore} from \"redux\";\r\nimport {chatReducer} from \"./chat-reducer\";\r\nimport thunk from \"redux-thunk\";\r\n\r\n\r\nlet rootReducer = combineReducers({\r\n    chat: chatReducer\r\n});\r\n\r\n// let composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE___;\r\nexport let store = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\n//@ts-ignore\r\nwindow.store = store;\r\n\r\nexport type AppStateType = ReturnType<typeof rootReducer>\r\nexport type InferActionTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never","import {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/store\";\r\nimport React, {ChangeEvent, KeyboardEvent, useEffect, useRef, useState} from \"react\";\r\nimport {destroyConnection, sendMessage, typeMessage} from \"../../redux/chat-reducer\";\r\nimport styles from '../../../src/Components/Chat/Chat.module.css'\r\nimport Button from \"@material-ui/core/Button/Button\";\r\nimport TextField from \"@material-ui/core/TextField/TextField\";\r\nimport Avatar from \"@material-ui/core/Avatar/Avatar\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\ntype Props = {\r\n    name: string\r\n}\r\n\r\nexport type MessageType = {\r\n    message: string,\r\n    id: number\r\n    user: UserType\r\n}\r\n\r\nexport type UserType = {\r\n    id: string,\r\n    name: string\r\n}\r\n\r\n\r\nexport const Chat = (props: Props) => {\r\n    const messages = useSelector((state: AppStateType) => state.chat.messages);\r\n    const typingUsers = useSelector((state: AppStateType) => state.chat.typingUsers);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const [message, setMessage] = useState('');\r\n    const [isAutoScrollActive, setIsAutoScrollActive] = useState(true);\r\n    const [lastScrollTop, setLastScrollTop] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (isAutoScrollActive) {\r\n            messagesAnchorRef.current?.scrollIntoView({behavior: 'smooth'})\r\n        }\r\n    }, [messages, typingUsers]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(destroyConnection())\r\n        }\r\n    }, []);\r\n\r\n    const messagesAnchorRef = useRef<HTMLDivElement>(null);\r\n\r\n    const scrollMessages = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        let element = e.currentTarget;\r\n        const maxScrollPosition = element.scrollHeight - element.clientHeight;\r\n        if (element.scrollTop > lastScrollTop && Math.abs(maxScrollPosition - element.scrollTop) < 2) {\r\n            setIsAutoScrollActive(true)\r\n        } else {\r\n            setIsAutoScrollActive(false)\r\n        }\r\n        setLastScrollTop(element.scrollTop)\r\n    };\r\n\r\n    const sendMessageFunc = () => {\r\n        dispatch(sendMessage(message));\r\n        setMessage('')\r\n    };\r\n\r\n    const messageElements = messages.map((m: MessageType) => {\r\n        return <div key={m.id}>\r\n            <Avatar>\r\n            </Avatar>\r\n            <b>{m.user.name}: </b>\r\n            {m.message}\r\n            <hr/>\r\n        </div>\r\n    });\r\n\r\n    const typingUsersElement = typingUsers.map((m: UserType) => {\r\n        return <div key={m.id}>\r\n            <b>{m.name}:</b> ...\r\n        </div>\r\n    });\r\n\r\n    const typeMessageFunc = (target: KeyboardEvent<HTMLDivElement>) => {\r\n        if (target.key === 'Enter') {\r\n            dispatch(sendMessage(message));\r\n            setMessage('');\r\n\r\n        }\r\n    };\r\n\r\n    const onChangeTyping = (e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n        setMessage(e.currentTarget.value);\r\n        dispatch(typeMessage())\r\n    };\r\n\r\n\r\n    if (props.name === 'anonymous') {\r\n        return <Redirect to={`/login`}/>\r\n    }\r\n\r\n    return (\r\n\r\n        <div>\r\n            <div className={styles.chatWindow}\r\n                 onScroll={scrollMessages}>\r\n                {messageElements}\r\n                {typingUsersElement}\r\n                <div\r\n                    ref={messagesAnchorRef}>\r\n                </div>\r\n            </div>\r\n            <div className={styles.messageField}>\r\n                <TextField id='outlined-basic'\r\n                           label='Enter your message...'\r\n                           value={message}\r\n                           onKeyPress={typeMessageFunc}\r\n                           onChange={onChangeTyping}/>\r\n            </div>\r\n            <div className={styles.messageButton}>\r\n                <Button size='medium'\r\n                        variant='outlined'\r\n                        color='primary'\r\n                        onClick={sendMessageFunc}>\r\n                    Send message\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\n","import React, {useEffect, KeyboardEvent} from \"react\";\r\nimport styles from \"../LoginPage/LoginPage.module.css\";\r\nimport TextField from \"@material-ui/core/TextField/TextField\";\r\nimport Button from \"@material-ui/core/Button/Button\";\r\nimport {createConnection, setClientName} from \"../../redux/chat-reducer\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {NavLink, useHistory} from \"react-router-dom\";\r\n\r\ntype Props = {\r\n    temporaryName: string,\r\n    name: string\r\n    setName: (name: string) => void,\r\n    setTemporaryName: (name: string) => void\r\n}\r\n\r\nexport const LoginPage = (props: Props) => {\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const setClientNameOnKeyPress = (target: KeyboardEvent<HTMLDivElement>) => {\r\n        if (target.key === 'Enter' && props.temporaryName.length > 0) {\r\n            setClientNameOnClick();\r\n            history.push('/chat')\r\n        }\r\n    };\r\n\r\n    const setClientNameOnClick = () => {\r\n        props.setName(props.temporaryName);\r\n        dispatch(setClientName(props.temporaryName));\r\n    };\r\n\r\n    useEffect(() => {\r\n        dispatch(createConnection());\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <h1 className={styles.header}>Welcome to chat</h1>\r\n            <div className={styles.nameField}>\r\n                <TextField id='outlined-basic'\r\n                           label='Enter your name'\r\n                           onChange={(e) => props.setTemporaryName(e.currentTarget.value)}\r\n                           onKeyPress={setClientNameOnKeyPress}/>\r\n            </div>\r\n            <div className={styles.nameButton}>\r\n                <NavLink className={styles.buttonText} to={props.temporaryName.length < 1 ? '/login' : '/chat'}>\r\n                    <Button className={styles.buttonText}\r\n                            size='medium'\r\n                            variant='outlined'\r\n                            color='primary'\r\n                            disabled={props.temporaryName.length < 1}\r\n                            onClick={setClientNameOnClick}>\r\n                        Enter to chat\r\n                    </Button>\r\n                </NavLink>\r\n            </div>\r\n        </div>\r\n    )\r\n};","import React, {useState} from 'react'\r\nimport {Redirect, Route, Switch} from 'react-router-dom';\r\nimport './App.css'\r\nimport {Chat} from \"./Components/Chat/Chat\";\r\nimport {LoginPage} from \"./Components/LoginPage/LoginPage\";\r\n\r\n\r\nexport const MessengerApp = () => {\r\n\r\n    const [temporaryName, setTemporaryName] = useState('');\r\n    const [name, setName] = useState('anonymous');\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <Switch>\r\n                <Route exact path='/' render={() => <Redirect to={`/login`}/>}/>\r\n                <Route path='/login' render={() => <LoginPage temporaryName={temporaryName} setTemporaryName={setTemporaryName} name={name} setName={setName} />}/>\r\n                <Route path='/chat' render={() => <Chat name={name}/>}/>\r\n            </Switch>\r\n        </div>\r\n    )\r\n};\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport * as serviceWorker from './serviceWorker'\r\nimport {Provider} from 'react-redux'\r\nimport {store} from './redux/store'\r\nimport {MessengerApp} from \"./MessengerApp\";\r\nimport {BrowserRouter} from \"react-router-dom\";\r\n\r\n\r\nReactDOM.render(\r\n    <BrowserRouter>\r\n        <React.StrictMode>\r\n            <Provider store={store}>\r\n                <MessengerApp/>\r\n            </Provider>\r\n        </React.StrictMode>\r\n    </BrowserRouter>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nameField\":\"LoginPage_nameField__3k50E\",\"nameButton\":\"LoginPage_nameButton__PlP0X\",\"buttonText\":\"LoginPage_buttonText__90rpc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatWindow\":\"Chat_chatWindow__1IOs5\",\"messageField\":\"Chat_messageField__22XGF\",\"messageButton\":\"Chat_messageButton__3Ym2P\",\"header\":\"Chat_header__FZ4b1\"};"],"sourceRoot":""}